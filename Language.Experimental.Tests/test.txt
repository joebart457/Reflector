
(library msvcrt `msvcrt.dll`)

(import msvcrt cdecl printf:void (params (param msg string)))

(type myType
	(field msg string)
)


(defn Main:void (params)
	(doCallThenPrint[cfn_ptr[string, void]] printf)
	(return)
)

(defn indirect_print:cfn_ptr[string, void] (params)
	(return printf)
)


(defn doCallThenPrint[gen T]:void (params (param func T))
	(func 'test')
	((indirect_print) 'Hello world!')
	(return)
)